<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Off Canvas Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/offcanvas.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css" rel="stylesheet" />
    <![endif]-->

</head>

<body onload="loadBoards()">
<nav class="navbar navbar-fixed-top navbar-inverse">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">티켓팀 게시판</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a id="about" onmouseover="" style="cursor: pointer;">About</a></li>
                <li><a id="contact" onmouseover="" style="cursor: pointer;">Contact</a></li>
            </ul>
        </div><!-- /.nav-collapse -->
    </div><!-- /.container -->
</nav><!-- /.navbar -->

<div class="container">
    <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-12 col-sm-9">
            <p class="pull-right visible-xs">
                <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
            </p>
            <div class="jumbotron">
                <h1>환영합니다.</h1>
                <p>티켓 게시판에서 자유롭게 글을 작성하고 확인할 수 있습니다. 비밀글 기능이 있어서 자신만의 메모장 처럼 이용할 수도 있습니다.</p>
            </div>
            <div class="row" id="mainContainer">
            </div><!--/row-->
        </div><!--/.col-xs-12.col-sm-9-->

        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
            <div class="list-group">
                <a class="list-group-item active">메뉴</a>
                <a class="list-group-item" id="write" onmouseover="" style="cursor: pointer;">글 쓰기</a>
                <a class="list-group-item" id="showMine" data-toggle="modal" onmouseover="" style="cursor: pointer;">내가 쓴 글 보기</a>
                <a class="list-group-item" id="search" data-toggle="modal" onmouseover="" style="cursor: pointer;">검색하기</a>
                <a class="list-group-item" id="goMain" href='/'>메인으로</a>
            </div>
        </div><!--/.sidebar-offcanvas-->
    </div><!--/row-->
    <hr>

    <footer>
        <p>&copy; Coupang 2016</p>
    </footer>

</div><!--/.container-->


<!-- Modal -->
<div id="getWriter" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">내가 쓴 글 검색하기</h4>
            </div>
            <div class="modal-body">
                <div class="row-fluid">
                    <div class="span6">
                        <h4>작성자 이름:</h4>
                        <p><input id="writer" type="text" class="span12"></p>
                    </div>
                    <br>
                    <div class="checkbox">
                        <label><input type="checkbox" id="isPrivate">자기만 보기 게시물만 검색</label>
                    </div>
                    <div class="span6">
                        <h4>비밀 번호:</h4>
                        <p><input id="password" type="password" class="span12" style="background-color: #adadad" readonly></p>
                        <h6>비밀번호 입력시 해당 비밀번호로 등록된 나만의 보기 게시글 모두 검색 가능</h6>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn">취소</button>
                <button type="button" class="btn btn-primary" id="search_start">검색 시작</button>
            </div>
        </div>
    </div>
</div>

<div id="contact_modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">개발자 프로필</h4>
            </div>
            <div class="modal-body">
                <div class="row-fluid">
                    <div class="span6">
                        <h4>작성자 이름: 조원혁</h4>
                    </div>
                    <div class="span6">
                        <h4>이메일: linus@coupang.com</h4>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn">닫기</button>
            </div>
        </div>
    </div>
</div>

<div id="about_modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">본 게시판 이용 정보</h4>
            </div>
            <div class="modal-body">
                <div class="row-fluid">
                    <div class="span6">
                        <h4>1. 로그인 없이 자신만의 글 작성 가능! 작성자와 비밀번호를 적고 자기만 보기를 선택하면 자신만의 메모장 처럼 이용 가능하다.</h4>
                        <h5>상세 : 비밀 번호 입력시 그 작성자의 모두 공개 게시물과 그 비밀 번호가 맞는 모든 비공개 게시물이 검색됩니다. 이 때 비밀번호가 있다고 해서 꼭 자기만 보기 게시물은 아닙니다.</h5>
                        <h5>Hint! : 비밀번호를 모두 통일시키면 비공개 메모를 한번에 모두 조회 가능!</h5>
                    </div>
                    <div class="span6">
                        <h4>2. 회사 내 공지 사항으로 사용하기 편리 하다.</h4>
                    </div>
                    <div class="span6">
                        <h4>3. 다양한 조건들로 검색이 가능하다.</h4>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn">닫기</button>
            </div>
        </div>
    </div>
</div>



<div id="search_modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">다양한 조건으로 검색하기</h4> <h5>원하는 조건들을 선택하여 입력해 주세요. 중복 조건이 가능합니다.</h5>
            </div>
            <form id="search_form" role="form">
            <div class="modal-body">
                <div class="row-fluid">
                    <div class="span6">
                        <h4>키워드 검색:</h4>
                        <p><input name="keyword" id="search_keyword" type="text" class="span12"></p>
                        <h6>제목 또는 게시글 내용이 해당 키워드를 포함할 경우</h6>
                    </div>
                    <br>
                    <br>
                    <div class="span6">
                        <h4>작성자 이름:</h4>
                        <p><input name="writer" id="search_writer" type="text" class="span12"></p>
                    </div>
                    <div class="checkbox">
                        <label><input name="isPrivate" type="checkbox" id="search_isPrivate">자기만 보기 추가 검색</label>
                        <h5>(자기만 보기 게시물<strong>만</strong> 검색하려면 "내가 쓴 글 보기" 메뉴를 이용해 주세요!)</h5>
                    </div>
                    <div class="span6">
                        <h4>비밀 번호:</h4>
                        <p><input name="password" id="search_password" type="password" class="span12" style="background-color: #adadad" readonly></p>
                        <h6>비밀번호 입력시 해당 비밀번호로 등록된 나만의 보기 게시글 모두 검색 가능</h6>
                    </div>
                    <br>
                    <br>
                    <div class="span6">
                        <label><input name="isTimeSearch" type="checkbox" id="search_isTimeSearch">시간별 검색 조건 추가하기</label>
                        <h4>작성 및 업데이트 시간 기준 검색</h4>
                        <h5>검색 시작 시간</h5>
                        <input name="startTime" id="search_startTime" style="background-color : #adadad" type="datetime-local" readonly>
                        <h5>검색 종료 시간</h5>
                        <p><input name="endTime" id="search_endTime" style="background-color : #adadad" type="datetime-local" readonly></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn">취소</button>
                <button type="button" class="btn btn-primary" id="search_all">검색 시작</button>
            </div>
            </form>
        </div>
    </div>
</div>



<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="http://getbootstrap.com/2.3.2/assets/js/google-code-prettify/prettify.js"></script>

<script src="js/ajaxManager.js"></script>
<script src="js/sha256.js"></script>
<script src="js/bootstrap-modalmanager.js"></script>
<script src="js/bootstrap-modal.js"></script>
<script src="js/loadboards.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/offcanvas.js"></script>
<script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap.js"></script>


<script type="text/javascript">
    $('#search').click(function() {
        $('#search_modal').modal('show');
    });


    $('#isPrivate').click(function() {
        if ($(this).is(':checked') == true) {
            $("#password").css({'background-color' : '#FFFFFF'});
            $("#password").attr("readonly", false);
        }else{
            $("#password").css({'background-color' : '#adadad'});
            $("#password").attr("readonly", true);
        }
    });


    $('#search_isPrivate').click(function() {
        if ($(this).is(':checked') == true) {
            $("#search_password").css({'background-color' : '#FFFFFF'});
            $("#search_password").attr("readonly", false);
        }else{
            $("#search_password").css({'background-color' : '#adadad'});
            $("#search_password").attr("readonly", true);
        }
    });


    $('#search_isTimeSearch').click(function() {
        if ($(this).is(':checked') == true) {
            $("#search_startTime").css({'background-color' : '#FFFFFF'});
            $("#search_startTime").attr("readonly", false);
            $("#search_endTime").css({'background-color' : '#FFFFFF'});
            $("#search_endTime").attr("readonly", false);
        }else{
            $("#search_startTime").css({'background-color' : '#adadad'});
            $("#search_startTime").attr("readonly", true);
            $("#search_endTime").css({'background-color' : '#adadad'});
            $("#search_endTime").attr("readonly", true);
        }
    });


    $('#search_all').click(function() {
        password = document.getElementById("search_password").value;
        isPrivate = document.getElementById("search_isPrivate").checked;
        isTimeSearch = document.getElementById("search_isTimeSearch").checked;

        if(isPrivate && password==""){
            alert("나만 보기를 검색 하시려면 비밀번호를 입력하셔야 합니다!")
            return false;
        }
        if(!isTimeSearch) {
            document.getElementById("search_startTime").value = "";
            document.getElementById("search_endTime").value = "";
        }

        var search_form = $("#search_form").serialize();
        ajaxManager.addReq({
            url : "/search/",
            type : "POST", // http method
            data : search_form,//{writer: writer, password: password, keyword: keyword, startTime: startTime, endTime: endTime, isPrivate: isPrivate},
            success : function(view) {
                $('#research_modal').modal('hide');
                $("#mainContainer").replaceWith(view);
            },
            error : function(err) {
                alert("error on ajax!");
                // provide a bit more info about the error to the console
            }
        });
    });


    $(function() {
        $('#showMine').click(function() {
            $('#getWriter').modal('show');
        });

        $('#search_start').click(function() {
            writer = document.getElementById("writer").value;
            password = document.getElementById("password").value;
            isPrivate = document.getElementById("isPrivate").checked;
            if(isPrivate && password==""){
                alert("나만 보기를 검색 하시려면 비밀번호를 입력하셔야 합니다!")
                return false;
            }
            ajaxManager.addReq({
                url : "/search/writer",
                type : "POST", // http method
                data : {writer: writer, password: password, isPrivate: isPrivate},
                success : function(view) {
                    $('#getWriter').modal('hide');
                    $("#mainContainer").replaceWith(view);
                },
                error : function(err) {
                    alert("error on ajax!");
                    // provide a bit more info about the error to the console
                }
            });
        });
    });



    $('#write').click(function() {
        ajaxManager.addReq({
            url : "/write/",
            type : "GET", // http method
            success : function(view) {
                $("#mainContainer").replaceWith(view);
            },
            error : function(err) {
                alert("error on ajax!");
                // provide a bit more info about the error to the console
            }
        });
    });

    function update(boardSrl){
        ajaxManager.addReq({
            url : "/write/?boardSrl="+boardSrl,
            type : "GET", // http method
            success : function(view) {
                $("#mainContainer").replaceWith(view);
            },
            error : function(err) {
                alert("error on ajax!");
                // provide a bit more info about the error to the console
            }
        });
    }

    function deleteBoard(boardSrl){
        ajaxManager.addReq({
            url : "/write/"+boardSrl,
            type : "DELETE", // http method
            success : function(view) {
                if(view) {
                    alert("게시물이 정상적으로 지워졌습니다.");
                } else {
                    alert("게시물 삭제에 오류가 있습니다.(다른 사람이 이미 삭제 가능)");
                }
                loadBoards();
            },
            error : function(err) {
                alert("error on ajax!");
                // provide a bit more info about the error to the console
            }
        });
    }

    function getDetail(boardSrl){
        ajaxManager.addReq({
            url : "/search/srl",
            type : "POST", // http method
            data : {boardSrl: boardSrl},
            success : function(view) {
                $("#mainContainer").replaceWith(view);
            },
            error : function(err) {
                alert("error on ajax!");
                // provide a bit more info about the error to the console
            }
        });

    }

    $('#contact').click(function() {
        $('#contact_modal').modal('show');
    });

    $('#about').click(function() {
        $('#about_modal').modal('show');
    });
</script>
